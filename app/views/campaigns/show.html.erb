
<article style="">
  <h1>
    <%= @campaign.name.capitalize %>
      <span class="pull-right">
      <p class="label label-info">
        <strong>Target:
          $<%= @campaign.target %>
        </strong>
      </p>
      </span>
  <br/>
   <small>
    by <%= @campaign.user.name %>
    </small>
  </h1>
<hr/>
  <div class="clearfix row" >
  <div class="pull-left col-md-4">
  <%= image_tag(@campaign.image.url(:square), :class => "img-rounded pull-left") %>
  <br><br>
  </div>

  <div class="pull-left col-md-8">
    <p class="well clearfix">
    <%= truncate(@campaign.description, length: 500) %>
    <br/>
    <% if current_user && current_user.admin? %>
      <%= link_to "Edit", edit_campaign_path(@campaign), :class => "btn btn-default btn-xs pull-right" %>    
      <%= link_to "Delete", campaign_path(@campaign), :method => "DELETE", confirm: "Are you sure?", :class => "btn btn-danger btn-xs pull-right" %>
    <% end %>
    </p>

    <div class="panel panel-default">
      <div class="panel-heading">
         <h3>
            Donate & Upload
            <span class="label label-success pull-right">
              <strong>Price:</strong>
              $<%= @campaign.price %>
            </span>
          </h3>
      </div>
      <div class="panel-body">
      <%= form_tag ({:controller => "photos", :action => "create"}), :enctype =>"multipart/form-data" do %>
        <%= label :image, "Image : " %>
        <%= file_field_tag "image" %>
        <%= hidden_field_tag :campaign_id, @campaign.id %>
        <%= hidden_field_tag :amount, @campaign.price %>
        <br/>
        <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                data-key="<%= @campaign.user.stripe_publishable_key %>"
                data-description="Donation to <%= @campaign.name %>"
                data-amount="<%= @campaign.price * 100 %>"
                data-image="<%= @campaign.image.url(:thumb) %>">
        </script>
      <% end %>
      </div>
  </div>
    <% if @campaign.photos !=  [] %>
      <h3>Photos</h3>
      <hr/>
      <% @campaign.photos.reverse.each do |photo| %>
        <div class="col-md-3 pull-left text-center">
          <%= link_to image_tag(photo.image.url(:square), :class => "img-rounded pull-left"), photo %>
          <br/>
          <p class="pull-left">
            <h3><%= link_to photo.title|| "View", photo %></h3>
          </p>
        </div>

      <% end %>
    <% end %>

  </div>
  </div>
</article>

<style type="text/css">
  body {
    background-image: url(<%= @campaign.banner.url %>);
    background-size: cover;
  }

</style>